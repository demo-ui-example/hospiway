import{preloadImages}from"../../libs/utils.js";function swiperCourse(){document.querySelector(".course-swiper")&&new Swiper(".course-swiper",{slidesPerView:1,spaceBetween:20,navigation:{nextEl:".course-list .swiper-button-next",prevEl:".course-list .swiper-button-prev"},breakpoints:{991:{slidesPerView:3,spaceBetween:20}}})}function swiperIntruct(){document.querySelector(".swiper-instruct")&&new Swiper(".swiper-instruct",{slidesPerView:1,spaceBetween:20,navigation:{nextEl:".instruct-list .swiper-button-next",prevEl:".instruct-list .swiper-button-prev"},breakpoints:{991:{slidesPerView:4,spaceBetween:20}}})}function swiperTraining(){document.querySelector(".training-swiper")&&new Swiper(".training-swiper",{slidesPerView:1,spaceBetween:20,navigation:{nextEl:".training-list .swiper-button-next",prevEl:".training-list .swiper-button-prev"},breakpoints:{991:{slidesPerView:4,spaceBetween:20}}})}function swiperTeam(){var e,t;document.querySelector(".team-image")&&document.querySelector(".swiper-content-team")&&(e=new Swiper(".team-image",{effect:"fade",slidesPerView:1,speed:900,allowTouchMove:!0,breakpoints:{991:{allowTouchMove:!1}}}),t=new Swiper(".swiper-content-team",{slidesPerView:1,speed:900,allowTouchMove:!0,controller:{control:e},breakpoints:{991:{allowTouchMove:!1}},navigation:{nextEl:".team-left .swiper-button-next",prevEl:".team-left .swiper-button-prev"},pagination:{el:".team-left .swiper-pagination",type:"fraction"}}),e.controller.control=t)}function marquee(){document.querySelectorAll(".marquee-container").forEach(e=>{let t=e.querySelector(".marquee-content");var r=[...e.querySelectorAll(".marquee-item")],n=parseFloat(e.getAttribute("data-speed"))||50,i=(t.innerHTML="",r.forEach(e=>t.appendChild(e.cloneNode(!0))),[...t.children]);let o=0;i.forEach(e=>o+=e.offsetWidth);var r=e.offsetWidth,s=Math.ceil(r/o)+2;for(let e=0;e<s;e++)i.forEach(e=>{t.appendChild(e.cloneNode(!0))});let a=0,c=([...t.children].forEach(e=>a+=e.offsetWidth),gsap.set(t,{x:0,willChange:"transform",force3D:!0}),gsap.timeline({repeat:-1}));c.to(t,{x:-a,duration:a/n,ease:"none",modifiers:{x:e=>parseFloat(e)%a+"px"}}),!parseFloat(e.getAttribute("hover-pause"))&&1||(e.addEventListener("mouseenter",()=>c.pause()),e.addEventListener("mouseleave",()=>c.resume()))})}function customDropdown(){let e=document.querySelectorAll(".dropdown-custom, .dropdown-custom-select");function c(n){e.forEach(e=>{var t=e.querySelector(".dropdown-custom-menu"),r=e.querySelector(".dropdown-custom-btn");n&&e===n||(t.classList.remove("dropdown--active"),r.classList.remove("--active"))})}e.forEach(i=>{let t=i.querySelector(".dropdown-custom-btn"),r=i.querySelector(".dropdown-custom-menu");var e=i.querySelectorAll(".dropdown-custom-item");let o=i.querySelector(".value-select"),s=i.querySelector(".dropdown-custom-text"),a=i.classList.contains("dropdown-custom-select");t.addEventListener("click",function(e){e.stopPropagation(),c(i),r.classList.toggle("dropdown--active"),t.classList.toggle("--active")}),document.addEventListener("click",function(){c()}),e.forEach(n=>{n.addEventListener("click",function(e){var t,r;e.stopPropagation(),a?(e=n.textContent,s.textContent=e,i.classList.add("selected")):(e=(e=o.querySelector("img"))?e.src:"",t=o.querySelector("span").textContent,r=n.innerHTML,o.innerHTML=r,"Time"!==t.trim()&&(n.innerHTML=e?`<span>${t}</span><img src="${e}" alt="" />`:`<span>${t}</span>`)),c()})}),window.addEventListener("scroll",function(){r.closest(".header-lang")&&(r.classList.remove("dropdown--active"),t.classList.remove("--active"))})})}function swiperPageFeedback(){document.querySelector(".swiper-teach")&&(new Swiper(".swiper-teach",{slidesPerView:1,spaceBetween:20,navigation:{nextEl:".feedback-teach .swiper-button-next",prevEl:".feedback-teach .swiper-button-prev"},breakpoints:{991:{slidesPerView:3,spaceBetween:20}}}),document.querySelector(".swiper-video"))&&new Swiper(".swiper-video",{slidesPerView:1,spaceBetween:20,navigation:{nextEl:".feedback-video .swiper-button-next",prevEl:".feedback-video .swiper-button-prev"},breakpoints:{991:{slidesPerView:3,spaceBetween:20}}})}function headerMobile(){var e=document.getElementById("btn-hambuger");let t=document.querySelector(".header-menu");e.addEventListener("click",function(){this.classList.toggle("active"),t.classList.toggle("active")})}function effectFade(){gsap.utils.toArray(".data-fade-in").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 80%",end:"bottom 80%"},opacity:1,y:0,duration:.5,ease:"sine.out"})})}function registerForm(){if(!($(".form-register-wrapper").length<1)){let n=$(".form-register-wrapper form");n.on("submit",function(e){e.preventDefault();var e={name:n.find("input[name='name']"),phone:n.find("input[name='phonenumber']"),email:n.find("input[name='email']"),course:n.find(".form-field .dropdown-custom-select .dropdown-custom-text")},t=n.find("texarea");n.find(".error-message").remove(),n.find("input").removeClass("error");let r=!0;$.each(e,(e,t)=>{t.val().trim()||(t.addClass("error"),r=!1)}),r&&$.ajax({type:"POST",url:ajaxUrl,data:{action:"form_register_course",name:e.name.val().trim(),phone:e.phone.val().trim(),email:e.email.val().trim(),course:e.course.text().trim(),message:t.text().trim()},beforeSend:function(){n.find("button[type='submit']").addClass("aloading")},success:function(e){n.find("button[type='submit']").removeClass("aloading"),n[0].reset();let t=document.getElementById("modalSuccess"),r=bootstrap.Modal.getOrCreateInstance(t);t.classList.contains("show")||r.show(),setTimeout(function(){t.classList.contains("show")&&r.hide()},1e4)},error:function(e,t,r){console.error("Lỗi khi gửi form:",r)}})})}}$=jQuery;let init=()=>{gsap.registerPlugin(ScrollTrigger),swiperCourse(),swiperTraining(),swiperTeam(),marquee(),customDropdown(),swiperPageFeedback(),headerMobile(),swiperIntruct(),effectFade(),registerForm()},isLinkClicked=(preloadImages("img").then(()=>{init()}),!1);$("a").on("click",function(e){!this.href||this.href.match(/^#/)||this.href.match(/^javascript:/)||(isLinkClicked=!0,console.log("1"))}),$(window).on("beforeunload",function(){isLinkClicked||$(window).scrollTop(0),isLinkClicked=!1});